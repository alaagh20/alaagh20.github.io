@inherits umbraco.MacroEngines.DynamicNodeContext
@{
    var root = Model.NodeById(Parameter.menuParent);
}
<div class="navbar @(@Model.template == 1053 ? "transparent navbar-inverse navbar-fixed-top" : "navbar-inverse navbar-static-top")">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="~/home-page/">
                <strong>MAS360</strong>
            </a>
            <div class="nav-collapse collapse">
                <ul class="nav pull-right">

                    @foreach (var page in root.Children.Where("Visible"))
                    {

                        if (page.Children.Where("Visible").Count() > 0 && page.Id != 1172)
                        {
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" title="@page.name">
                                    @page.name
                                <b class="caret"></b>
                            </a>

                            <ul class="dropdown-menu" role="menu">
                                @foreach (var subPage in page.Children.Where("Visible"))
                                {
                                    <li><a href="@subPage.Url" title="@subPage.name">@subPage.name</a></li>
                                }
                            </ul>
                        </li>
                        }
                        else
                        {
                            <li>
                                <a href="@page.Url" title="@page.name">@page.name</a>
                            </li>
                        }


                    }
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </div>
</div>

